<div class="login-container">
  <div class="login-card-wrapper">
    <p-card [style]="{'width': '450px', 'box-shadow': '0 20px 60px rgba(0,0,0,0.3)'}">
      <ng-template pTemplate="header">
        <div class="login-header">
          <div class="header-icon">
            <i class="pi pi-heart" style="font-size: 4rem; color: #fff;"></i>
          </div>
          <h1>Inovar Health System</h1>
          <p>Primary Health Center & Laboratory Management</p>
        </div>
      </ng-template>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        <div class="field">
          <label for="username" class="block text-900 font-medium mb-2">Username</label>
          <span class="p-input-icon-left w-full">
            <i class="pi pi-user"></i>
            <input
              id="username"
              type="text"
              pInputText
              formControlName="username"
              placeholder="Enter your username"
              class="w-full"
              [class.ng-invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
            />
          </span>
          <small class="p-error block mt-1" *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
            <i class="pi pi-exclamation-circle"></i> Username is required
          </small>
        </div>

        <div class="field">
          <label for="password" class="block text-900 font-medium mb-2">Password</label>
          <span class="p-input-icon-left p-input-icon-right w-full">
            <i class="pi pi-lock"></i>
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              pInputText
              formControlName="password"
              placeholder="Enter your password"
              class="w-full"
              [class.ng-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            />
            <i 
              [class]="'pi ' + (showPassword ? 'pi-eye-slash' : 'pi-eye')"
              (click)="showPassword = !showPassword"
              style="cursor: pointer;"
            ></i>
          </span>
          <small class="p-error block mt-1" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <i class="pi pi-exclamation-circle"></i> Password is required
          </small>
        </div>

        <p-button
          type="submit"
          label="Login"
          icon="pi pi-sign-in"
          [loading]="loading"
          [disabled]="loginForm.invalid"
          styleClass="w-full"
          [style]="{'margin-top': '1.5rem'}"
        ></p-button>
      </form>

      <ng-template pTemplate="footer">
        <p-divider></p-divider>
        <div class="login-footer">
          <p class="text-sm text-color-secondary text-center m-0">
            <i class="pi pi-info-circle mr-2"></i>
            Default credentials: nurse1/nurse123 or lab1/lab123
          </p>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>

<p-toast></p-toast>

